{"filter":false,"title":"contexts.py","tooltip":"/cart/contexts.py","undoManager":{"mark":-1,"position":-1,"stack":[[{"start":{"row":15,"column":37},"end":{"row":16,"column":0},"action":"remove","lines":["",""],"id":7}],[{"start":{"row":16,"column":8},"end":{"row":16,"column":50},"action":"remove","lines":["product = get_object_or_404(ticket, pk=id)"],"id":6},{"start":{"row":16,"column":4},"end":{"row":16,"column":8},"action":"remove","lines":["    "]},{"start":{"row":16,"column":0},"end":{"row":16,"column":4},"action":"remove","lines":["    "]}],[{"start":{"row":16,"column":41},"end":{"row":16,"column":42},"action":"insert","lines":["t"],"id":5}],[{"start":{"row":16,"column":36},"end":{"row":16,"column":37},"action":"insert","lines":["t"],"id":4},{"start":{"row":16,"column":37},"end":{"row":16,"column":38},"action":"insert","lines":["i"]},{"start":{"row":16,"column":38},"end":{"row":16,"column":39},"action":"insert","lines":["c"]},{"start":{"row":16,"column":39},"end":{"row":16,"column":40},"action":"insert","lines":["k"]},{"start":{"row":16,"column":40},"end":{"row":16,"column":41},"action":"insert","lines":["e"]}],[{"start":{"row":16,"column":42},"end":{"row":16,"column":43},"action":"remove","lines":["t"],"id":3},{"start":{"row":16,"column":41},"end":{"row":16,"column":42},"action":"remove","lines":["c"]},{"start":{"row":16,"column":40},"end":{"row":16,"column":41},"action":"remove","lines":["u"]},{"start":{"row":16,"column":39},"end":{"row":16,"column":40},"action":"remove","lines":["d"]},{"start":{"row":16,"column":38},"end":{"row":16,"column":39},"action":"remove","lines":["o"]},{"start":{"row":16,"column":37},"end":{"row":16,"column":38},"action":"remove","lines":["r"]},{"start":{"row":16,"column":36},"end":{"row":16,"column":37},"action":"remove","lines":["P"]}],[{"start":{"row":1,"column":0},"end":{"row":1,"column":35},"action":"remove","lines":["from products.models import Product"],"id":2}],[{"start":{"row":0,"column":0},"end":{"row":21,"column":85},"action":"insert","lines":["from django.shortcuts import get_object_or_404","from products.models import Product","","","def cart_contents(request):","    \"\"\"","    Ensures that the cart contents are available when rendering","    every page","    \"\"\"","    cart = request.session.get('cart', {})","","    cart_items = []","    total = 0","    product_count = 0","    ","    for id, quantity in cart.items():","        product = get_object_or_404(Product, pk=id)","        total += quantity * product.price","        product_count += quantity","        cart_items.append({'id': id, 'quantity': quantity, 'product': product})","    ","    return {'cart_items': cart_items, 'total': total, 'product_count': product_count}"],"id":1}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":0,"column":0},"end":{"row":0,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":90,"mode":"ace/mode/python"}},"timestamp":1562073745181,"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709"}